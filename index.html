<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>文字列変換ツール（双方向+スペース対応）</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to right, #e0f7fa, #e1bee7);
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
    }

    .container {
      background: white;
      padding: 30px 40px;
      border-radius: 15px;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
      text-align: center;
      max-width: 500px;
      width: 90%;
    }

    h2 {
      margin-bottom: 10px;
      color: #6a1b9a;
    }

    p {
      font-size: 0.9em;
      color: #555;
      margin-bottom: 20px;
    }

    input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1em;
    }

    button {
      padding: 10px 50px;
      margin: 5px;
      background-color: #7e57c2;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #5e35b1;
    }

    .footer {
      margin-top: 20px;
      font-size: 0.8em;
      color: #888;
    }
  </style>
</head>
<body>

  <div class="container">
    <h2>Toyota語変換ツール</h2>
    <p>※ローマ字に変換する際にスペースを入れずに出力してしまうと正しく変換されない恐れがあります</p>

    <label for="inputText">入力文字列:</label><br>
    <input type="text" id="inputText" placeholder="例: toto toyo tata"><br>

    <button onclick="convertToAlphabet()">ローマ字に変換</button>
    <button onclick="convertToEncoded()">Toyota語に変換</button><br><br>

    <label for="outputText">変換後の文字列:</label><br>
    <input type="text" id="outputText" readonly><br>
    <button onclick="copyToClipboard()">コピー</button>

    <div class="footer">制作: kai_ojwisj (ChatGPTに感謝)</div>
  </div>

  <script>
    const toAlpha = {
      "to": "a",    "yo": "b",    "ta": "c",
      "toto": "d",  "toyo": "e",  "tota": "f",
      "yoto": "g",  "yoyo": "h",  "yota": "i",
      "tato": "j",  "tayo": "k",  "tata": "l",
      "tototo": "m","totoyo": "n","totota": "o",
      "toyoto": "p","toyoyo": "q","toyota": "r",
      "totato": "s","totayo": "t","totata": "u",
      "yototo": "v","yotoyo": "w","yotota": "x",
      "yoyoto": "y","yoyoyo": "z","yoyota": " "
    };

    const toCode = {};
    for (const [key, value] of Object.entries(toAlpha)) {
      toCode[value] = key;
    }

    const sortedKeys = Object.keys(toAlpha).sort((a, b) => b.length - a.length);

    function convertToAlphabet() {
      const input = document.getElementById("inputText").value;
      const segments = input.trim().split(" ");
      const result = [];

      for (let segment of segments) {
        let temp = segment;
        let outputSegment = "";
        while (temp.length > 0) {
          let matched = false;
          for (let key of sortedKeys) {
            if (temp.startsWith(key)) {
              outputSegment += toAlpha[key];
              temp = temp.slice(key.length);
              matched = true;
              break;
            }
          }
          if (!matched) {
            outputSegment += temp[0];
            temp = temp.slice(1);
          }
        }
        result.push(outputSegment);
      }

      document.getElementById("outputText").value = result.join(" ");
    }

    function convertToEncoded() {
      const input = document.getElementById("inputText").value;
      let output = "";

      for (let char of input) {
        const code = toCode[char.toLowerCase()];
        if (code !== undefined) {
          output += code + " ";
        } else {
          output += char;
        }
      }

      document.getElementById("outputText").value = output.trim();
    }

    function copyToClipboard() {
      const output = document.getElementById("outputText");
      output.select();
      output.setSelectionRange(0, 99999); // モバイル対応
      document.execCommand("copy");

      const button = event.target;
      const originalText = button.innerText;
      button.innerText = "コピーしました！";
      setTimeout(() => {
        button.innerText = originalText;
      }, 1500);
    }
  </script>

</body>
</html>
